<?xml version="1.0" encoding="UTF-8"?>

<?import java.net.URL?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.Tab?>
<?import javafx.scene.control.TabPane?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.text.Font?>

<AnchorPane fx:id="AnchorPane" prefHeight="800.0" prefWidth="1387.0" xmlns="http://javafx.com/javafx/23.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="controller.ClientesController">

    <stylesheets>
        <URL value="@../styles/clientes.css" />
    </stylesheets>

    <children>

        <!-- Título -->
        <Label layoutX="493.0" layoutY="22.0" text="Gestión de Clientes Fiados">
            <font>
                <Font size="24.0" />
            </font>
        </Label>

        <!-- Búsqueda -->
        <Label layoutX="50.0" layoutY="70.0" styleClass="subtitulo" text="Buscar cliente:" />
        <TextField fx:id="txtBuscarCliente" layoutX="222.0" layoutY="67.0" prefHeight="35.0" prefWidth="250.0" promptText="Nombre, alias o celular..." styleClass="filler" />
        <Button fx:id="btnBuscar" layoutX="500.0" layoutY="68.0" styleClass="boton" text="Buscar" />
        <Button fx:id="btnLimpiar" layoutX="591.0" layoutY="68.0" styleClass="boton" text="Limpiar" />

        <!-- Lista clientes -->
        <Label layoutX="50.0" layoutY="120.0" text="Lista de Clientes">
            <font>
                <Font size="16.0" />
            </font>
        </Label>
        <Separator layoutX="50.0" layoutY="140.0" prefWidth="1100.0" />

        <TableView fx:id="tablaClientes" layoutX="50.0" layoutY="160.0" prefHeight="185.0" prefWidth="1100.0">
            <columns>
                <TableColumn fx:id="colNombre" prefWidth="250.0" text="Nombre" />
                <TableColumn fx:id="colAlias" prefWidth="150.0" text="Alias" />
                <TableColumn fx:id="colCelular" prefWidth="120.0" text="Celular" />
                <TableColumn fx:id="colTotalFiados" prefWidth="100.0" text="Total Fiados" />
                <TableColumn fx:id="colDeudaTotal" prefWidth="120.0" text="Deuda Total" />
                <TableColumn fx:id="colUltimaFecha" prefWidth="100.0" text="Último Fiado" />
            </columns>
            <columnResizePolicy>
                <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
            </columnResizePolicy>
        </TableView>

        <!-- Cliente seleccionado -->
        <Label layoutX="53.0" layoutY="375.0" styleClass="subtitulo" text="Cliente seleccionado:" AnchorPane.topAnchor="375.0" />
        <Label fx:id="lblClienteSeleccionado" layoutX="301.0" layoutY="375.0" styleClass="subtitulo" text="---" AnchorPane.topAnchor="375.0">
            <font>
                <Font size="14.0" />
            </font>
        </Label>
        <Button fx:id="btnEditarCliente" layoutX="1029.0" layoutY="355.0" styleClass="boton" text="Editar Cliente" />

        <!-- TabPane -->
        <TabPane fx:id="tabPaneCliente" layoutX="50.0" layoutY="410.0" prefHeight="340.0" prefWidth="1100.0" tabClosingPolicy="UNAVAILABLE">
            <tabs>
                <!-- Tab Fiados -->
                <Tab text="Fiados">
                    <content>
                        <AnchorPane minHeight="0.0" minWidth="0.0" prefHeight="310.0" prefWidth="1100.0">
                            <children>
                                <TableView fx:id="tablaFiados" layoutX="20.0" layoutY="25.0" prefHeight="215.0" prefWidth="1060.0" styleClass="tablaVenta" AnchorPane.bottomAnchor="66.0" AnchorPane.leftAnchor="20.0" AnchorPane.rightAnchor="20.0" AnchorPane.topAnchor="25.0">
                                    <columns>
                                        <TableColumn fx:id="colDia" prefWidth="80.0" text="Día" />
                                        <TableColumn fx:id="colHora" prefWidth="70.0" text="Hora" />
                                        <TableColumn fx:id="colMonto" prefWidth="100.0" text="Monto" />
                                        <TableColumn fx:id="colAnticipos" prefWidth="100.0" text="Anticipos" />
                                        <TableColumn fx:id="colResto" prefWidth="120.0" text="Resto a pagar" />
                                        <TableColumn fx:id="colEstado" prefWidth="100.0" text="Estado" />
                                        <TableColumn fx:id="colObservaciones" prefWidth="200.0" text="Observaciones" />
                                    </columns>
                                    <columnResizePolicy>
                                        <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                                    </columnResizePolicy>
                                </TableView>
                                <Button fx:id="btnFinalizarFiado" layoutX="20.0" layoutY="207.0" styleClass="boton" text="Finalizar fiado" AnchorPane.topAnchor="207.0" />
                            </children>
                        </AnchorPane>
                    </content>
                </Tab>

                <!-- Tab Anticipos -->
                <Tab text="Anticipos">
                    <content>
                        <AnchorPane minHeight="0.0" minWidth="0.0" prefHeight="310.0" prefWidth="1100.0">
                            <children>
                                <TableView fx:id="tablaAnticipos" layoutX="20.0" layoutY="20.0" prefHeight="270.0" prefWidth="1060.0" styleClass="tablaVenta" AnchorPane.bottomAnchor="66.0" AnchorPane.leftAnchor="20.0" AnchorPane.rightAnchor="20.0" AnchorPane.topAnchor="25.0">
                                    <columns>
                                        <TableColumn fx:id="colDiaAnticipo" prefWidth="80.0" text="Día" />
                                        <TableColumn fx:id="colHoraAnticipo" prefWidth="70.0" text="Hora" />
                                        <TableColumn fx:id="colDineroOtorgado" prefWidth="150.0" text="Dinero otorgado" />
                                        <TableColumn fx:id="colMedioAbonado" prefWidth="150.0" text="Medio abonado" />
                                        <TableColumn fx:id="colFiadoRelacionado" prefWidth="120.0" text="Fiado relacionado" />
                                    </columns>
                                    <columnResizePolicy>
                                        <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                                    </columnResizePolicy>
                                </TableView>
                        <Button layoutX="20.0" layoutY="213.0" mnemonicParsing="false" styleClass="boton" text="Generar anticipo" AnchorPane.topAnchor="213.0" />
                            </children>
                        </AnchorPane>
                    </content>
                </Tab>

                <!-- Tab Productos -->
                <Tab text="Productos">
                    <content>
                        <AnchorPane minHeight="0.0" minWidth="0.0" prefHeight="310.0" prefWidth="1100.0">
                            <children>
                                
                                <TableView fx:id="tablaProductos" layoutX="20.0" layoutY="40.0" prefHeight="200.0" prefWidth="1060.0" styleClass="tablaVenta" AnchorPane.bottomAnchor="66.0" AnchorPane.leftAnchor="20.0" AnchorPane.rightAnchor="20.0" AnchorPane.topAnchor="25.0">
                                    <columns>
                                        <TableColumn fx:id="colNombreProducto" prefWidth="300.0" text="Nombre" />
                                        <TableColumn fx:id="colPrecio" prefWidth="100.0" text="Precio" />
                                        <TableColumn fx:id="colPesoCantidad" prefWidth="120.0" text="Peso/cantidad" />
                                        <TableColumn fx:id="colTotal" prefWidth="100.0" text="Total" />
                                    </columns>
                           <columnResizePolicy>
                              <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                           </columnResizePolicy>
                                </TableView>
                            </children>
                        </AnchorPane>
                    </content>
                </Tab>
            </tabs>
        </TabPane>

        <!-- Panel de difuminado (modal) -->
        <AnchorPane fx:id="difuminar" disable="true" styleClass="difuminar" visible="false" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="0.0">
            <children>
                <AnchorPane fx:id="spaDetalle" layoutX="182.0" prefHeight="378.0" prefWidth="784.0" AnchorPane.bottomAnchor="372.0" AnchorPane.leftAnchor="182.0" AnchorPane.rightAnchor="234.0" AnchorPane.topAnchor="50.0" />
            </children>
        </AnchorPane>

    </children>
</AnchorPane>
