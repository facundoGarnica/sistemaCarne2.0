<?xml version="1.0" encoding="UTF-8"?>

<?import java.net.URL?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<AnchorPane id="AnchorPane" prefHeight="800.0" prefWidth="1200.0" styleClass="mainFxmlClass" xmlns="http://javafx.com/javafx/23.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="controller.Crear_ventasController">
    <stylesheets>
        <URL value="@../styles/crear_ventas.css" />
    </stylesheets>
   <children>
      <!-- Header con botón regresar y búsqueda -->
      <HBox alignment="CENTER_LEFT" spacing="20.0" AnchorPane.leftAnchor="10.0" AnchorPane.rightAnchor="10.0" AnchorPane.topAnchor="10.0">
         <children>
            <Button mnemonicParsing="false" onAction="#cerrarVentas" styleClass="boton" text="&lt; Regresar" />
            
            <!-- Contenedor centrado para código de barra -->
            <AnchorPane prefHeight="48.0" styleClass="anchoBarra" HBox.hgrow="ALWAYS">
               <children>
                  <HBox alignment="CENTER" spacing="10.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="5.0">
                     <children>
                        <Label styleClass="textoBarra" text="Codigo de barra" />
                        <TextField fx:id="txtCodigoDeBarra" prefHeight="38.0" prefWidth="440.0" styleClass="codigoBarra" />
                        <Button mnemonicParsing="false" onAction="#SepararCodigo" prefHeight="34.0" prefWidth="119.0" styleClass="boton" text="Ingresar" />
                     </children>
                  </HBox>
               </children>
            </AnchorPane>
            
            <Button mnemonicParsing="false" onAction="#difuminarTodo" prefHeight="45.0" styleClass="boton" text="Generar fiado (F11)" />
         </children>
      </HBox>

      <!-- Contenedor principal de tablas -->
      <HBox spacing="15.0" AnchorPane.bottomAnchor="200.0" AnchorPane.leftAnchor="10.0" AnchorPane.rightAnchor="10.0" AnchorPane.topAnchor="80.0">
         <children>
            <!-- Tabla de productos (70% del ancho) -->
            <TableView fx:id="tblVistaProductos" prefHeight="520.0" prefWidth="840.0" styleClass="tablaCrearVenta" HBox.hgrow="ALWAYS">
              <columns>
                <TableColumn fx:id="colProducto" prefWidth="75.0" text="Producto" />
                <TableColumn fx:id="colPrecio" prefWidth="75.0" text="Precio" />
                <TableColumn fx:id="colPeso" prefWidth="75.0" text="Peso" />
                <TableColumn fx:id="colTotal" prefWidth="75.0" text="Total" />
              </columns>
               <columnResizePolicy>
                  <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
               </columnResizePolicy>
            </TableView>
            
            <!-- Tabla de vuelto (30% del ancho) -->
            <TableView fx:id="tbolVueltos" prefHeight="520.0" prefWidth="692.0" styleClass="tablaCrearVenta">
              <columns>
                <TableColumn fx:id="colRecibido" prefWidth="75.0" text="Recibido" />
                <TableColumn fx:id="colVuelto" prefWidth="75.0" text="Vuelto a dar" />
              </columns>
               <columnResizePolicy>
                  <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
               </columnResizePolicy>
            </TableView>
         </children>
      </HBox>

      <!-- Panel inferior con información de pago -->
      <HBox prefHeight="180.0" spacing="15.0" AnchorPane.bottomAnchor="10.0" AnchorPane.leftAnchor="10.0" AnchorPane.rightAnchor="10.0">
         <children>
            <!-- Panel Medio de Pago -->
            <VBox alignment="CENTER" prefHeight="180.0" prefWidth="369.0" styleClass="contenedor" HBox.hgrow="SOMETIMES">
               <children>
                  <Label styleClass="titulo" text="Medio de pago">
                     <font>
                        <Font size="24.0" />
                     </font>
                  </Label>
                  <Label fx:id="lblMedioPago" styleClass="medioPago" text="---">
                     <font>
                        <Font size="24.0" />
                     </font>
                  </Label>
               </children>
            </VBox>
            
            <!-- Panel Total a Pagar -->
            <VBox alignment="CENTER" prefHeight="180.0" prefWidth="360.0" styleClass="contenedor" HBox.hgrow="SOMETIMES">
               <children>
                  <Label styleClass="titulo" text="Total a pagar">
                     <font>
                        <Font size="24.0" />
                     </font>
                  </Label>
                  <Label fx:id="lblCantidadPagar" styleClass="numeroTotal" text="---">
                     <font>
                        <Font size="24.0" />
                     </font>
                  </Label>
               </children>
            </VBox>
            
            <!-- Panel Mercado Pago -->
            <VBox prefHeight="180.0" prefWidth="488.0" styleClass="contenedor" HBox.hgrow="ALWAYS">
               <children>
                  <!-- Título con botones de navegación -->
                  <HBox alignment="CENTER" spacing="10.0">
                     <children>
                        <Button mnemonicParsing="false" styleClass="botonDeslizante" text="&lt;" />
                        <Button mnemonicParsing="false" styleClass="botonDeslizante" text="&gt;" />
                        <Label prefHeight="43.0" prefWidth="505.0" styleClass="subtitulo" text="Transferencias de Mercado Pago" />
                     </children>
                  </HBox>
                  
                  <!-- Información de la transacción -->
                  <HBox spacing="10.0" VBox.vgrow="ALWAYS">
                     <children>
                        <!-- Panel Monto -->
                        <VBox alignment="CENTER" styleClass="anchor-pane-blanco" HBox.hgrow="ALWAYS">
                           <children>
                              <Label styleClass="subtitulo" text="Monto:">
                                 <font>
                                    <Font size="18.0" />
                                 </font>
                              </Label>
                              <Label fx:id="lblMonto" styleClass="texto-MP" text="--">
                                 <font>
                                    <Font size="16.0" />
                                 </font>
                              </Label>
                           </children>
                        </VBox>
                        
                        <!-- Panel Hora -->
                        <VBox alignment="CENTER" styleClass="anchor-pane-blanco" HBox.hgrow="ALWAYS">
                           <children>
                              <Label styleClass="subtitulo" text="Hora:">
                                 <font>
                                    <Font size="18.0" />
                                 </font>
                              </Label>
                              <Label fx:id="lblHora" styleClass="texto-MP" text="--">
                                 <font>
                                    <Font size="16.0" />
                                 </font>
                              </Label>
                           </children>
                        </VBox>
                        
                        <!-- Panel Aprobado -->
                        <VBox fx:id="vBoxAprobado" alignment="CENTER" styleClass="anchor-pane-blanco" HBox.hgrow="ALWAYS">
                           <children>
                              <Label styleClass="subtitulo" text="Aprobado:">
                                 <font>
                                    <Font size="18.0" />
                                 </font>
                              </Label>
                              <Label fx:id="lblEstado" styleClass="texto-MP" text="--">
                                 <font>
                                    <Font size="16.0" />
                                 </font>
                              </Label>
                           </children>
                        </VBox>
                     </children>
                  </HBox>
               </children>
            </VBox>
         </children>
      </HBox>

      <!-- Overlay para modal (manteniendo funcionalidad original) -->
      <AnchorPane id="difuminar" fx:id="difuminar" disable="true" prefHeight="387.0" prefWidth="1200.0" visible="false" AnchorPane.bottomAnchor="333.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="80.0">
         <children>
            <AnchorPane id="overlayNombre" fx:id="overlayNombre" prefHeight="282.0" prefWidth="534.0" AnchorPane.bottomAnchor="100.0" AnchorPane.leftAnchor="50.0" AnchorPane.rightAnchor="50.0" AnchorPane.topAnchor="100.0" />
         </children>
      </AnchorPane>
   </children>
</AnchorPane>
